# AsterDEX API Credentials
API_KEY=a6e25bcd44c0d2b843cf2187a704c9456d180a12af0c81ff4cd5684a4965fe72
API_SECRET=9e4c6e768378be3cafd321998d53e338bf64aef86e94d907380ff4f8b93283d3

# Telegram Bot (Optional)
TELEGRAM_TOKEN=8291644636:AAFoVcH-LQdjcWlIdcdYV8oa067WxVQk2Ko
TELEGRAM_CHAT_ID=-1003157421030

# Trading Config
TESTNET_MODE=false
SYMBOLS=ADAUSDT,BNBUSDT,DOGEUSDT,UNIUSDT,LINKUSDT,BTCUSDT,ETHUSDT,SOLUSDT,XRPUSDT
# Đã thêm XRPUSDT để bot quản lý vị thế đang mở
LEVERAGE=10
# Position Size Config (choose one):
# Option 1: Use percentage of balance (e.g., 0.2 = 20%)
SIZE_PCT=0.2
# Option 2: Use fixed USDT amount per position (e.g., 10 = $10 per trade)
# If POSITION_SIZE_USDT is set, it will override SIZE_PCT
POSITION_SIZE_USDT=10
# TP/SL in percentage (1.0 = 1%, not 0.01)
# CHIẾN LƯỢC LỢI NHUẬN CAO: TP cao, để trailing có thời gian hoạt động
TP_PCT=0.05               # TP 5% PnL (tăng từ 3% để trailing có không gian)
SL_PCT=0               # SL 2% PnL (bật lại để bảo vệ vốn, R:R = 2.5:1)
LOOP_SLEEP=60             # 60s (tăng từ 45s để giảm noise)
DAILY_LOSS_LIMIT=0.15     # 15% (giảm từ 20%)

# ML Config
LSTM_HIDDEN_SIZE=128
LSTM_NUM_LAYERS=2
LSTM_EPOCHS=100
LSTM_DROPOUT=0.35
LSTM_LEARNING_RATE=0.0003
SEQUENCE_LENGTH=60
LSTM_THRESHOLD=0.58       # Tăng từ 0.55 để selective hơn

# XGBoost Config (Anti-overfitting)
XGBOOST_MAX_DEPTH=4
XGBOOST_LEARNING_RATE=0.03
XGBOOST_N_ESTIMATORS=300
XGBOOST_MIN_CHILD_WEIGHT=5
XGBOOST_SUBSAMPLE=0.7
XGBOOST_COLSAMPLE_BYTREE=0.7
XGBOOST_REG_ALPHA=0.5
XGBOOST_REG_LAMBDA=2.0


USE_ADVANCED_ENTRY=True           # ⚠️ BẬT LẠI!
MIN_CONFLUENCE_SCORE=6            # Tăng từ 4 lên 6 cho quality
USE_MULTI_TIMEFRAME=True
PRIMARY_TIMEFRAME=15m
HIGHER_TIMEFRAME=1h

POSITION_TIMEOUT_HOURS=36
WAIT_FOR_CONFIRMATION=True
CONFIRMATION_CANDLES=2


# Ensemble with 4 models
USE_ENSEMBLE=True
ENSEMBLE_MODELS=lstm,xgboost,lightgbm,catboost
ENSEMBLE_WEIGHTS=0.20,0.30,0.30,0.20    # Cân bằng hơn


# SmartEntryV2
USE_SMART_ENTRY_V2=True
MIN_ENTRY_SCORE=6
MIN_RR_RATIO=0
REQUIRE_SESSION_TIMING=False

# Multi-timeframe
USE_MULTI_TIMEFRAME=True
PRIMARY_TIMEFRAME=15m
HIGHER_TIMEFRAME=1h


# Backtest Settings
BACKTEST_DAYS=90
BACKTEST_INITIAL_CAPITAL=1000

# Signal Filters
USE_SIGNAL_FILTERS=True
USE_TREND_FILTER=True
USE_VOLATILITY_FILTER=True
USE_VOLUME_FILTER=True            # BẬT volume filter
MIN_VOLUME_RATIO=1.2              # Tăng từ 1.0 lên 1.2
MIN_ATR_PCT=0.3
MAX_ATR_PCT=4.0                   # Giảm từ 6.0 xuống 5.0
MIN_SIGNAL_QUALITY_SCORE=60       # Tăng từ 40 lên 50

# ============================================
# TRAILING STOP - TỐI ƯU LỢI NHUẬN CAO (V2)
# ============================================
# Chiến lược: "Let profits run" - Để lợi nhuận chạy xa
# Trailing activate cao hơn, distance rộng hơn để tránh bị stop out sớm
#
# VỚI LEVERAGE 10x:
# - 1% PnL = 0.1% price movement
# - 1.5% PnL activation = 0.15% price movement
# - 0.8% PnL distance = 0.08% price movement
#
USE_TRAILING_STOP=True
USE_PNL_BASED_TRAILING=True          # BẬT tính theo PnL (QUAN TRỌNG!)
TRAILING_ACTIVATION_PCT=1.5          # Activate ở 1.5% PnL (tăng từ 1.0%)
TRAILING_DISTANCE_PCT=0.8            # Trail 0.8% PnL từ đỉnh (tăng từ 0.5%)

USE_ATR_TRAILING=False
ATR_TRAILING_MULTIPLIER=2.0
USE_BREAKEVEN_STOP=True
BREAKEVEN_ACTIVATION_PCT=1.0         # Breakeven ở 1.0% PnL (tăng từ 0.6%)
BREAKEVEN_OFFSET_PCT=0.15            # Đảm bảo ít nhất 0.15% profit khi breakeven

# Market Regime Detection
USE_MARKET_REGIME=True
REGIME_LOOKBACK=50

# Symbol Optimization
USE_SYMBOL_OPTIMIZER=True
SYMBOL_PARAMS_FILE=config/symbol_params.json


# ============================================
# ANTI-WHIPSAW FILTERS
# ============================================
USE_SIGNAL_COOLDOWN=True
SIGNAL_COOLDOWN_MINUTES=60           # 1 giờ cooldown sau khi vào lệnh

REQUIRE_HTF_TREND_ALIGNMENT=True     # Strict HTF alignment
USE_MULTI_TIMEFRAME=True
PRIMARY_TIMEFRAME=15m
HIGHER_TIMEFRAME=1h

USE_ML_CONVICTION_FILTER=True
MIN_ML_CONVICTION=0.12

# ============================================
# POST-TRADE COOLDOWN (MỚI!)
# ============================================
# Đợi sau khi đóng lệnh trước khi vào lệnh mới
USE_POST_TRADE_COOLDOWN=True
POST_TRADE_COOLDOWN_MINUTES=5        # Đợi 5 phút sau khi đóng lệnh
POST_TRADE_REQUIRE_PULLBACK=True     # Yêu cầu price pullback
PULLBACK_PCT=0.2                     # Pullback ít nhất 0.2% từ giá đóng

# ============================================
# ENTRY QUALITY CHECK (MỚI!)
# ============================================
# Kiểm tra chất lượng entry sau khi vừa đóng lệnh
USE_ENTRY_QUALITY_CHECK=True
MIN_ENTRY_QUALITY_SCORE=2            # Cần ít nhất 2/5 quality factors


POSITION_TIMEOUT_HOURS=36